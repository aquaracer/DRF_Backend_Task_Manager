## Техническое задание:

Требуется написать персонализированный сервис task manager, позволяющий пользователю ставить себе задачи, отражать в системе изменение их статуса и просматривать историю задач.

Сервис должен предоставлять интерфейс в виде JSON API, это единственный способ общения клиента с сервисом
Авторизация в апи происходит с помощью токена (переданного в заголовке Authorization)
сервис будет покрыт тестами
содержать Dockerfile для сборки сервиса


### Функциональные требования:

   - Пользователь может зарегистрироваться в сервисе задав пару логин-пароль
   - В системе может существовать много пользователей
   - Пользователь может авторизоваться в сервисе предоставив пару логин-пароль и получив в ответе токен
   - Пользователь видит только свои задачи
   - Пользователь может создать себе задачу. Задача должна как минимум содержать следующие данные:

(*) - обязательные поля

   - *Название
   - *Описание
   - *Время создания
   - *Статус - один из Новая, Запланированная, в Работе, Завершённая
   - Планируемое дата завершения

   - Пользователь может менять статус задачи на любой из данного набора
   - Пользователь может менять планируемое время завершения, название и описание
   - Пользователь может получить список задач своих задач, с возможностью фильтрации по статусу и планируемому времени завершения
   - Пользователь может просмотреть историю изменений задачи (названия, описания, статуса, времени завершения)



### Реализация.

Задание реализовано на Python 3 с использованием фреймворка Django/DjangoRestFramework. В качестве СУБД используется PostgreSQL. Сервис покрыт тестами посредством Unittest. Для сборки сервиса использвется Docker/Docker-Compose


Ниже приведен список эндпоинтов, используемых в сервисе, и их описание

#### * /auth/users/ - POST
регистрация пользователя

пример запроса 
```bash
curl -X POST http://127.0.0.1:8000/auth/users/ --data 'username=djoser&password=alpine12'
```

пример ответа
```bash
{"email": "", "username": "djoser", "id":1}
```

#### * /auth/token/login/ - POST

представление токена зарегистрированному пользователю по логину и паролю.


пример запроса 
```bash
curl -X POST http://127.0.0.1:8000/auth/token/login/ --data 'username=djoser&password=alpine12'
```

пример ответа
```bash
{"auth_token": "b704c9fc3655635646356ac2950269f352ea1139"}
```

#### * api/tasks/ - GET 
список задач  пользователя. обязательным условием является передача токена аутентификации в заголовке запросе

пример запроса:

```bash
curl -LX GET http://127.0.0.1:8000/api/tasks/ -H 'Authorization: Token b704c9fc3655635646356ac2950269f352ea1139'
```

пример ответа:

```bash
[
{
"id": 2,
"name": "run",
"description": "park",
"created": "2020-10-06T14:37:55.763202Z",
"status": "planned",
"planned_finish": "2020-10-07"
},
{
"id": 1,
"name": "swim",
"description": "pool",
"created": "2020-10-06T14:37:36.321868Z",
"status": "new",
"planned_finish": "2020-10-08"
}
]
```

#### * api/tasks/ - POST 
добавление задачи пользователя. обязательным условием является передача токена аутентификации в заголовке запроса

пример запроса:

```bash
curl -X POST http://127.0.0.1:8088/api/tasks/ -H 'Authorization: Token b704c9fc3655635646356ac2950269f352ea1139' —-data ‘name=read&descritpion=Mark Lutz&status=new&planned_finish=2020-10-30’
```

пример ответа:
```bash
{
"id": 3,
"name": "read",
"description": "Mark Lutz",
"created": "2020-10-06T14:43:17.268036Z",
"status": "new",
"planned_finish": "2020-10-30"
}
```

#### * api/tasks/<id_задачи> - PUT
изменения параметров задачи. обязательным условием является передача токена аутентификации в заголовке запроса.

пример запроса:

```bash
curl -X PUT http://127.0.0.1:8088/api/tasks/3/ -H 'Authorization: Token b704c9fc3655635646356ac2950269f352ea1139' —-data ‘name=read&descritpion=Mark Lutz.Python 3&status=new&planned_finish=2020-10-29’
```

пример ответа:

```bash
{
"id": 3,
"name": "read",
"description": "Mark Lutz. Python 3",
"created": "2020-10-06T14:46:24.307180Z",
"status": "new",
"planned_finish": "2020-10-29"
}
```

#### * /api/filtered_tasks/<статус_задачи>/<дата_завершения_задачи>/ - GET
список задач  пользователя отфильтрованный по дате и статусу. обязательным условием является передача токена аутентификации в заголовке запросе


пример запроса:

```bash
curl -LX GET http://127.0.0.1:8000/api/filtered_tasks/new/2020-10-08/ -H 'Authorization: Token b704c9fc3655635646356ac2950269f352ea1139'
```

пример ответа:

```bash
[
{
"id": 2,
"name": "run",
"description": "park",
"created": "2020-10-06T14:51:34.115980Z",
"status": "new",
"planned_finish": "2020-10-08"
},
{
"id": 1,
"name": "swim",
"description": "pool",
"created": "2020-10-06T14:37:36.321868Z",
"status": "new",
"planned_finish": "2020-10-08"
}
]
```


#### */api/task_changes/<id_задачи>/ - GET
список изменений задачи пользователя. обязательным условием является передача токена аутентификации в заголовке запросе

пример запроса:

```bash
curl -LX GET http://127.0.0.1:8000/api/task_changes/4/ -H 'Authorization: Token b704c9fc3655635646356ac2950269f352ea1139'
```

пример ответа:

```bash
[
{
"changed_task": 4,
"change_created": "2020-10-06T14:46:24.293426Z",
"task_name": "read",
"task_description": "Mark Lutz. Python 3",
"task_status": "new",
"task_planned_finish": "2020-10-29",
"changed_fields":[
"description",
"planned_finish"
]
},
{
"changed_task": 4,
"change_created": "2020-10-06T14:59:18.653582Z",
"task_name": "read",
"task_description": "Mark Lutz. Python 3",
"task_status": "planned",
"task_planned_finish": "2020-10-29",
"changed_fields":[
"status"
]
}
]
```

#### Запуск тестов
```bash
python manage.py test
```
